# Repository Synopsis

## 1. Project Overview

This repository contains the complete design, source code, and validation documentation for the **MAC HVAC AHU Controller** project. The project leverages the Siemens Modular Application Creator (MAC) framework to automate the generation of PLC code for a custom Air Handling Unit (AHU).

-   **System:** S7-1500 PLC controlling a single-duct, variable air volume (VAV) AHU.
-   **Core Logic:** Control of heating coil, cooling coil, and a fresh air economizer damper.
-   **Tools:** Siemens TIA Portal, S7-PLCSIM Advanced, Python (for test automation).

## 2. Directory Structure

The repository is organized to separate the high-level application design from the underlying Siemens MAC framework code.

```
.
├── MAC HVAC/
│   ├── documentation/
│   │   ├── Control_Strategy.md       # Detailed sequence of operations
│   │   ├── Hardware_BOM.md           # Bill of Materials for physical devices
│   │   └── Repository_Synopsis.md    # This file
│   │
│   ├── SDS_AHU_Controller.md         # Software Design Specification (Master IO List)
│   ├── AHU_UDT_Specification.md      # PLC User Defined Type (UDT) structure
│   │
│   ├── TiaPortal_Export_Files/       # Generated .scl and .xml source code from MAC
│   │   ├── EM100_Cooling_Coil_Valve.scl
│   │   ├── EM200_Heating_Coil_Valve.scl
│   │   ├── EM300_Fresh_Air_Damper.scl
│   │   ├── FB_CalculateAirEnthalpy.scl # Custom function block
│   │   ├── FB_CondensationPrevention.scl # Custom function block
│   │   └── ... (other generated files)
│   │
│   ├── TestSuiteFiles/               # Automated test plans and scripts
│   │   ├── EM400_Test_Plan.md
│   │   └── EM400_Test_Script.py
│   │
│   └── validation/                   # Formal validation and qualification documents
│       └── IQ-HVAC-001.md            # Installation Qualification protocol
│
└── MAC_use_cases/
    └── ... (Siemens MAC C# source code for the generator - not typically modified)
```

## 3. Key Documents & Workflow

1.  **Start Here -> `SDS_AHU_Controller.md`**: This is the **master IO list** and the primary input to the MAC code generator. All hardware points and control parameters are defined here.
2.  **Control Logic -> `documentation/Control_Strategy.md`**: This document explains *how* the AHU operates in plain language. It details the different modes (Occupied, Unoccupied, Economizer) and the logic for temperature and humidity control.
3.  **PLC Code -> `TiaPortal_Export_Files/`**: This directory contains the actual S7-SCL source code that is imported into the TIA Portal project. Most of this code is auto-generated by the MAC tool based on the SDS. Custom logic blocks are also stored here.
4.  **Testing -> `TestSuiteFiles/`**: For every feature, there should be a corresponding test plan (.md) and an automated Python script (.py) that uses a mock PLC to simulate and verify the logic.
5.  **Validation -> `validation/`**: This folder contains the formal documentation required for project qualification, proving that the system is installed and operating correctly according to the design.

## 4. Engineering Workflow

A typical workflow for modifying the project is as follows:

1.  **Define the Change:** Clearly state the goal (e.g., "Add a supply fan with VFD control").
2.  **Update the Master IO List:** Add the new components (motor, VFD, sensors) to the `SDS_AHU_Controller.md`.
3.  **Update Control Strategy:** Modify the `documentation/Control_Strategy.md` to describe how the new component will be controlled.
4.  **Generate Code:** Run the MAC C# application to regenerate the `TiaPortal_Export_Files/`.
5.  **Develop Tests:** Create a new test plan and Python script in `TestSuiteFiles/` to verify the new logic.
6.  **Verify & Validate:** Execute the tests and update the `validation/` documents as needed.
7.  **Submit:** Commit all changed files in a single, well-documented pull request.
